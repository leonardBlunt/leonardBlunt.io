<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>CP4I - Messaging</title>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

    <script>


        function myalertpodeventstreams() {
            alert("Installed Operators -> IBM Event Streams -> EventStreams");
        }
        function myalertpodeventstreamsuser() {
            alert("Installed Operators -> IBM Event Streams -> Kafka User");
        }
        function myalertpodeventTopic() {
            alert("Installed Operators -> IBM Event Streams -> Kafka Topic");
        }
        function copyToClipboard(element) {
    // Get the <pre> element
    const preTag = document.getElementById(element);

    // Create a copy button element
    const copyButton = document.createElement("span");
    copyButton.innerText = "Copy";
    copyButton.classList.add("copy-button");

    // Append the copy button to the <pre> tag
    preTag.appendChild(copyButton);

    // Add click event listener to the copy button
    copyButton.addEventListener("click", () => {
        // Hide the copy button temporarily
        copyButton.style.display = "none";

        // Create a range and select the text inside the <pre> tag
        const range = document.createRange();
        range.selectNode(preTag);
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);

        try {
            // Copy the selected text to the clipboard
            document.execCommand("copy");

            // Alert the user that the text has been copied
            copyButton.innerText = "Copied!";
            setTimeout(function() {
                copyButton.innerText = "Copy";
            }, 2000);
        } catch (err) {
            console.error("Unable to copy text:", err);
        } finally {
            // Show the copy button again
            copyButton.style.display = "inline";

            // Deselect the text
            window.getSelection().removeAllRanges();
        }
    });
}
    </script>
<style>
    .codeDiv {
        border: 1px #0000006e;
        background-color: #f8f8f8;
        text-align: left;
        vertical-align:text-bottom;
        color: #da467d;
    }
    pre {
    position: relative;
    background: #d3d6db;
    padding: 10px;
    font-size: 15px;
    word-wrap: break-word;
    white-space: pre-wrap;
    border: 1px solid #e6e7e9;
    
    }
    .copy-button {
        position: absolute;
        top: 2px;
        right: 10px;
        cursor: pointer;
        color: #fff;
        background: gray;
        border-radius: 0.5em;
        padding: 2px 7px;
        }

    .copy-button:hover {
    color: #000;
    }
</style>


</head>

<body>
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <!-- Navbar Brand-->
        <a class="navbar-brand ps-3" href="index.html">IBM CSM Labs</a>

        <!-- Sidebar Toggle-->
        <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i
                class="fas fa-bars"></i></button>
        <a class="navbar-brand ps-3" href="index.html">Integration Practicum</a>
        <!-- Navbar Search
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div>
            </form>-->
        <!-- Navbar
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="#!">Logout</a></li>
                    </ul>
                </li>
            </ul>-->
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading">Core</div>
                        <a class="nav-link" href="content.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Table Of Contents
                        </a>
                        <a class="nav-link" href="index.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                            Overview
                        </a>
                        <div class="sb-sidenav-menu-heading">Integration Capabilities</div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                            data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                            <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                            Prepare
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="cp4isetuppreexisting.html">Existing OCP Configuration</a>
                                <a class="nav-link" href="cp4isetupnewoperators.html">Install Integration Operators</a>
                            </nav>
                        </div>

                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapsePages"
                            aria-expanded="false" aria-controls="collapsePages">
                            <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                            Configure
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePages" aria-labelledby="headingTwo"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="mqsetup.html">Messaging Queue</a>
                                <a class="nav-link" href="eventstreamssetup.html">Events Cluster</a>
                                <a class="nav-link" href="temp.html">Streaming Queue</a>
                                <a class="nav-link" href="apiSetup.html">API and EEM</a>

                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                            data-bs-target="#collapsePages1" aria-expanded="false" aria-controls="collapsePages1">
                            <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                            Build
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePages1" aria-labelledby="headingOne"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="temp.html">Testing Applications</a>
                                <a class="nav-link" href="temp.html">API to MQ</a>
                            </nav>
                        </div>
                        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse"
                            data-bs-target="#collapsePages2" aria-expanded="false" aria-controls="collapsePages2">
                            <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                            Run
                            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                        </a>
                        <div class="collapse" id="collapsePages2" aria-labelledby="headingOne"
                            data-bs-parent="#sidenavAccordion">
                            <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionPages">
                                <a class="nav-link" href="run.html">Scenario Walkthrough</a>
                            </nav>
                        </div>
                        <div class="sb-sidenav-menu-heading">Add ons</div>
                        <a class="nav-link" href="glossary.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                            Glossary
                        </a>
                        <!-- <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                                Charts
                            </a>
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                Tables
                            </a> -->
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <div class="small">IBM CSM Labs</div>

                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid px-4">
                    <h2 class="mt-4">Configure EventStreams Cluster</h2>
                    <div class="card mb-4">
                        <div class="card-body">
                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item active"><h4 id="overview">Overview</h4></li>
                            </ol>
                            <p class="mb-0">
                                Built on open source Apache Kafka, IBM Event Streams is an event-streaming platform that
                                helps you build smart applications that can react to events as they happen. 
                            IBM Event Streams offers a fully managed Apache Kafka service deployed on OCP using operators, ensuring durability and high
                            availability for your solutions.
                            </p>
                            <p>In this section we will configure a Event Streams Cluster by proding custom resoure definitions to the installed operators.Including
                                <ol><li>Event Streams definition that that will create the base cluster components.</li>
                                <li>A series of kafka users that will be used. For interaction with the cluster.</li>
                                <li>A topic that will be th target for event procing in this workshop.</li>
                            </ol>
                            and as shown in the picrture below.<br>
                            <img src="/img/events-cluster.png" alt="Event Cluster" width="80%">
                            </p>
                            <p class="mb-0"> We will now setup and configure this cluster.</p> </br>
                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item active"><h4 id="cluster">Define Event Cluster</h4></li>
                            </ol>
                            <p class="mb-0">EventsStreams can be configured through OCP console, terminal, CP4I etc.
                                Here we will guide you on how to setup using ocp ternimal to creat a production type
                                eventstreams environment(ft-eventstreams) with 3 brokers. Apache Kafka is a distributed
                                messaging system. A Kafka cluster consists of a set of brokers. A cluster has a minimum
                                of three brokers.</p>
                            <ol>
                                <li>Login to Openshift console. Copy oc login details. Login to Bastion terminal,
                                    perform oc login and oc project mapped to cp4i. Refer to the section (CP4I - Setup
                                    -> Existing Configuration in OCP -> Installed Pods).</li>
                                <!--<img src="assets/img/CP4ISetup/image023.png" alt="Usecase" class="center" object-fit="none"/>-->
                                <li>Create eventstreams.yaml file in oc terminal</li>
                                <div class="codeDiv"><pre><code>vi eventstreams.yaml</code></pre></div>
                                <li>Use the following yaml content, paste in the oc terminal. Save and exit from
                                    eventstreams.yaml</li>
                                    <script src="https://gist.github.com/sujatha-sureshkmr/1c87d1e6b83e56c3d27ff256d1f1d3af.js"></script>
                                <div class="codeDiv">
                                    <pre><code></code>oc apply -f eventstreams.yaml</code></pre>
                                </div>
                            </ol>

                            <p class="mb-0"></p> </br>
                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item active"><h4 id="admin">Admin User</h4></li>
                            </ol>
                            <p class="mb-0"> We will now create a admin user (event-admin) using oc terminal. The
                                properties of this Kafka user are as follows:

                            <ol>
                                <li>This kafka user generates SCRAM-SHA-512 credentials for a producer and consumer
                                    application.</li>
                                <li>It grants permissions to produce to or consume from any topic.</li>
                                <li>It grants permission to read any schema.</li>
                            </ol>
                            </p>
                            <ol>
                                <li>Create eventstreams_user.yaml file in oc terminal</li>
                                <div class="codeDiv">
                                <pre><code>vi eventstreams_user.yaml</code></pre>
                            </div>
                                <li>Use the following yaml content, paste in the oc terminal. Save and exit from
                                    eventstreams_user.yaml</li>
                                    <script src="https://gist.github.com/sujatha-sureshkmr/ade29a57a3d075ae3e135b80df0e4cd5.js"></script>
                                

                                <li>Apply the changes to oc</li>
                                <div class="codeDiv"><pre><code>oc apply -f eventstreams_user.yaml</code></pre></div>
                            </ol>
                            <p class="mb-0"></p> </br>
                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item active"><h4 id="topic">Topic</h4></li>
                            </ol>
                            <p class="mb-0"> We will now create a kafka topic(ft-status) using oc terminal. Kafka topics
                                are the categories used to organize messages. Each topic has a name that is unique
                                across the entire Kafka cluster.

                                Messages are sent to and read from specific topics. In other words, producers write data
                                to topics, and consumers read data from topics.
                            </p>
                            <ol>
                                <li>Create eventstreams_topic.yaml file in oc terminal</li>
                                <div class="codeDiv"><pre><code>vi eventstreams_topic.yaml</code></pre></div>
                                <li>Use the following yaml content, paste in the oc terminal. Save and exit from
                                    eventstreams_topic.yaml</li>
                                    <script src="https://gist.github.com/sujatha-sureshkmr/110cf3b7759575dbed53f27c46bfb37e.js"></script>
                                <li>Apply the changes to oc</li>
                                <div class="codeDiv"><pre><code>oc apply -f eventstreams_topic.yaml</code></pre></div>
                            </ol>

                            <ol class="breadcrumb mb-4">
                                <li class="breadcrumb-item active"><h4 id="assignment">Assignment</h4></li>
                            </ol>

                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-1"></i>
                                    Quiz: Where do we check the status of "ft-eventstreams" ?
                                </div>
                                <div class="card-body">
                                    <form action="/url" method="GET">
                                        <input type="text">
                                    </form>
                                </div>
                            </div>

                            <input type="submit" value="Submit" class="submit-btn" onclick="myalertpodeventstreams()" />

                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-1"></i>
                                    Quiz: Where do we check the status of "event-admin" ?
                                </div>
                                <div class="card-body">
                                    <form action="/url" method="GET">
                                        <input type="text">
                                    </form>
                                </div>
                            </div>

                            <input type="submit" value="Submit" class="submit-btn"
                                onclick="myalertpodeventstreamsuser()" />

                            <div class="card mb-4">
                                <div class="card-header">
                                    <i class="fas fa-table me-1"></i>
                                    Quiz: Where do we check the status of "ft-status" ?
                                </div>
                                <div class="card-body">
                                    <form action="/url" method="GET">
                                        <input type="text">
                                    </form>
                                </div>
                            </div>

                            <input type="submit" value="Submit" class="submit-btn" onclick="myalertpodeventTopic()" />

                        </div>

                    </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid px-4">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; IBM Cloud Pak®</div>
                        <div>
                            <a href="https://www.ibm.com/us-en/privacy?lnk=flg-priv-usen">Privacy Policy</a>
                            &middot;
                            <a href="https://www.ibm.com/legal?lnk=flg-tous-usen">Terms of use</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>
</body>

</html>
